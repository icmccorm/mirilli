<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Quantitative Results | Audit</title>
  <meta name="description" content="An audit trail for all data collection and analysis." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Quantitative Results | Audit" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="An audit trail for all data collection and analysis." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Quantitative Results | Audit" />
  
  <meta name="twitter:description" content="An audit trail for all data collection and analysis." />
  

<meta name="author" content="Ian McCormack" />


<meta name="date" content="2023-05-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="sampling-for-qualitative-analysis.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="quantitative-results.html"><a href="quantitative-results.html"><i class="fa fa-check"></i><b>2</b> Quantitative Results</a>
<ul>
<li class="chapter" data-level="2.1" data-path="quantitative-results.html"><a href="quantitative-results.html#abi-distribution"><i class="fa fa-check"></i><b>2.1</b> ABI Distribution</a></li>
<li class="chapter" data-level="2.2" data-path="quantitative-results.html"><a href="quantitative-results.html#improper-type-errors"><i class="fa fa-check"></i><b>2.2</b> Improper Type Errors</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="sampling-for-qualitative-analysis.html"><a href="sampling-for-qualitative-analysis.html"><i class="fa fa-check"></i><b>3</b> Sampling for Qualitative Analysis</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Audit</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="quantitative-results" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> Quantitative Results<a href="quantitative-results.html#quantitative-results" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>We began with a snapshot of the <a href="https://crates.io/data-access">crates.io</a> database taken on 12/20/2022, which contained 113,632 crates. After filtering out crates without any valid published versions, 109,348 crates remained. We ran our linting tool on this population. Prior to linting, we found that the latest version of 13 crates contained an empty archive when downloaded from crates.io. For crates with non-empty archives, 38,707 passed the early linting stage, while 70,641 failed it. Of those that passed the early linting stage, 37,804 passed the late linting stage, while 903 failed it. We use the subset of crates that passed both linting stages as the basis for our study, which comprises <strong>33% of all crates</strong> in the database. Though 1,156 crates that passed the late linting stage failed to compile, we still include these in our sample to avoid excluding crates that have valid Rust code but are missing dependencies that cargo cannot provide.</p>
<div id="abi-distribution" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> ABI Distribution<a href="quantitative-results.html#abi-distribution" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Both the early and late lints recorded the number of occurrences of each ABI for the rust functions, foreign functions, and static items declared in each crate. We merged results from the early and late lints by recording the location in source code where each foreign item occurre and eliminating duplicate results. This ensures a more accurate count of foreign ABI use than using only the late lint, as has been common in prior work, given that some crates may pass the early lint but then fail the late lint due to missing dependencies that cargo cannot provide.</p>
<pre><code>## Warning in full_join(., early_abis, by = c(&quot;crate_name&quot;, &quot;category&quot;, &quot;abi&quot;, : Detected an unexpected many-to-many relationship between `x` and `y`.
## ℹ Row 1 of `x` matches multiple rows in `y`.
## ℹ Row 1073 of `y` matches multiple rows in `x`.
## ℹ If a many-to-many relationship is expected, set `relationship = &quot;many-to-many&quot;` to silence this warning.</code></pre>
<pre><code>## # A tibble: 13 × 3
## # Groups:   abi [8]
##    abi        category            `n()`
##    &lt;chr&gt;      &lt;chr&gt;               &lt;int&gt;
##  1 C          foreign_functions 1642548
##  2 C          rust_functions      14708
##  3 C          static_items         3171
##  4 C-unwind   rust_functions          3
##  5 efiapi     rust_functions          1
##  6 system     foreign_functions     532
##  7 system     rust_functions        756
##  8 sysv64     foreign_functions       2
##  9 sysv64     rust_functions         16
## 10 thiscall   foreign_functions    2814
## 11 unadjusted foreign_functions      12
## 12 win64      foreign_functions       2
## 13 win64      rust_functions          3</code></pre>
</div>
<div id="improper-type-errors" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Improper Type Errors<a href="quantitative-results.html#improper-type-errors" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We observed 9,983 type errors in foreign bindings, which occurred for 79 unique crates. Of these crates, there were 16 that globally disabled the <code>improper_ctypes</code> lint, 6 that globally disabled the <code>improper_types_definitions</code> lint, and 6 that globally disabled both lints. Alternatively, there were 10 crates that selectively disabled the <code>improper_ctypes</code> lint, 2 that selectively disabled the <code>improper_types_definitions</code> lint, and 1 crates that selectively disabled both lints. Combined, this results in 26 crates that disabled <code>improper_ctypes</code>, 8 that disabled <code>improper_types_definitions</code>, and 7 that disabled both lints in some fashion.</p>
<p>We classify errors as unique based on three factors. The first is the error type, of which there are 22 that the <code>improper_ctypes</code> lints will produce. The same error type can occur for multiple data types, of which there are 27. However, not every error type can occur for every data type; some, such as the “Str” error type, will only occur for the “Str” data type. We also classify two otherwise identical errors as being unique if they are associated with different categories of foreign items. There are three foreign item categories: rust functions, foreign functions, and foreign static items.</p>
<p>The table below summarizes the quantity and types of errors observed. Error counts to the right of a ‘/’ were hidden from the user.</p>
<pre><code>## # A tibble: 4 × 4
##   Category          `# Crates` `# Unique Errors` Total      
##   &lt;chr&gt;             &lt;chr&gt;      &lt;chr&gt;             &lt;chr&gt;      
## 1 Foreign Functions 52 / 22    12 / 9            9594 / 8741
## 2 Rust Functions    26 / 6     11 / 6            286 / 172  
## 3 Static Items      3 / 1      3 / 1             103 / 99   
## 4 All               79 / 27    26 / 16           9983 / 9012</code></pre>
<p>The following table displays hidden error counts by error type and data type.</p>
<pre><code>## # A tibble: 10 × 6
##    Type    Error      `Foreign Functions` `Foreign Items` `Rust Functions` Total
##    &lt;chr&gt;   &lt;chr&gt;                    &lt;dbl&gt;           &lt;dbl&gt;            &lt;dbl&gt; &lt;dbl&gt;
##  1 Adt     EnumNoRep…                  21               0                1    22
##  2 Adt     StructFie…                5809              99                7  5915
##  3 Adt     UnionLayo…                 404               0               17   421
##  4 Array   --                           1               0                0     1
##  5 Char    --                           1               0                0     1
##  6 Dynamic Dyn                          2               0                0     2
##  7 Int     Num128Bit                    1               0               66    67
##  8 Tuple   --                           7               0               23    30
##  9 Uint    Num128Bit                 2495               0               58  2553
## 10 All     All                       8741              99              172  9012</code></pre>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sampling-for-qualitative-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/02-quantitative.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

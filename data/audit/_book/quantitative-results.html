<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Quantitative Results | Audit</title>
  <meta name="description" content="An audit trail for all data collection and analysis." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Quantitative Results | Audit" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="An audit trail for all data collection and analysis." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Quantitative Results | Audit" />
  
  <meta name="twitter:description" content="An audit trail for all data collection and analysis." />
  

<meta name="author" content="Ian McCormack" />


<meta name="date" content="2023-06-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="sampling-for-qualitative-analysis.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="quantitative-results.html"><a href="quantitative-results.html"><i class="fa fa-check"></i><b>2</b> Quantitative Results</a>
<ul>
<li class="chapter" data-level="2.1" data-path="quantitative-results.html"><a href="quantitative-results.html#abi-distribution"><i class="fa fa-check"></i><b>2.1</b> ABI Distribution</a></li>
<li class="chapter" data-level="2.2" data-path="quantitative-results.html"><a href="quantitative-results.html#improper-type-errors"><i class="fa fa-check"></i><b>2.2</b> Improper Type Errors</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="sampling-for-qualitative-analysis.html"><a href="sampling-for-qualitative-analysis.html"><i class="fa fa-check"></i><b>3</b> Sampling for Qualitative Analysis</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Audit</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="quantitative-results" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> Quantitative Results<a href="quantitative-results.html#quantitative-results" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>We began with a snapshot of the <a href="https://crates.io/data-access">crates.io</a> database taken on 12/20/2022, which contained 113,632 crates. After filtering out crates without any valid published versions, 109,348 crates remained. We ran our linting tool on this population. Prior to linting, we found that the latest version of 0 crates contained an empty archive when downloaded from crates.io. For crates with non-empty archives, 87,725 passed the early linting stage, while 21,623 failed it. Of those that passed the early linting stage, 85,452 passed the late linting stage, while 2,273 failed it. We use the subset of crates that passed both linting stages as the basis for our study, which comprises <strong>75% of all crates</strong> in the database. Though -6,471 crates that passed the late linting stage failed to compile, we still include these in our sample to avoid excluding crates that have valid Rust code but are missing dependencies that cargo cannot provide.</p>
<div id="abi-distribution" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> ABI Distribution<a href="quantitative-results.html#abi-distribution" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Both the early and late lints recorded the number of occurrences of each ABI for the rust functions, foreign functions, and static items declared in each crate. We merged results from the early and late lints by recording the location in source code where each foreign item occurre and eliminating duplicate results. This ensures a more accurate count of foreign ABI use than using only the late lint, as has been common in prior work, given that some crates may pass the early lint but then fail the late lint due to missing dependencies that cargo cannot provide.</p>
<pre><code>## Warning in full_join(., early_abis, by = c(&quot;crate_name&quot;, &quot;category&quot;, &quot;abi&quot;, : Detected an unexpected many-to-many relationship between `x` and `y`.
## ℹ Row 1522 of `x` matches multiple rows in `y`.
## ℹ Row 1904 of `y` matches multiple rows in `x`.
## ℹ If a many-to-many relationship is expected, set `relationship = &quot;many-to-many&quot;` to silence this warning.</code></pre>
<pre><code>## # A tibble: 21 × 3
## # Groups:   abi [12]
##    abi              category            `n()`
##    &lt;chr&gt;            &lt;chr&gt;               &lt;int&gt;
##  1 C                foreign_functions 8246366
##  2 C                rust_functions     108809
##  3 C                static_items        11917
##  4 C-unwind         foreign_functions       1
##  5 C-unwind         rust_functions         18
##  6 cdecl            foreign_functions       2
##  7 efiapi           rust_functions          5
##  8 msp430-interrupt foreign_functions       2
##  9 msp430-interrupt rust_functions          1
## 10 stdcall          foreign_functions     154
## # ℹ 11 more rows</code></pre>
</div>
<div id="improper-type-errors" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Improper Type Errors<a href="quantitative-results.html#improper-type-errors" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We observed 16,407 type errors in foreign bindings, which occurred for 227 unique crates. Of these crates, there were 166 that globally disabled the <code>improper_ctypes</code> lint, 90 that globally disabled the <code>improper_types_definitions</code> lint, and 86 that globally disabled both lints. Alternatively, there were 41 crates that selectively disabled the <code>improper_ctypes</code> lint, 11 that selectively disabled the <code>improper_types_definitions</code> lint, and 1 crates that selectively disabled both lints. Combined, this results in 207 crates that disabled <code>improper_ctypes</code>, 101 that disabled <code>improper_types_definitions</code>, and 87 that disabled both lints in some fashion.</p>
<p>We classify errors as unique based on three factors. The first is the error type, of which there are 22 that the <code>improper_ctypes</code> lints will produce. The same error type can occur for multiple data types, of which there are 27. However, not every error type can occur for every data type; some, such as the “Str” error type, will only occur for the “Str” data type. We also classify two otherwise identical errors as being unique if they are associated with different categories of foreign items. There are three foreign item categories: rust functions, foreign functions, and foreign static items.</p>
<p>The table below summarizes the quantity and types of errors observed. Error counts to the right of a ‘/’ were hidden from the user.</p>
<pre><code>## # A tibble: 4 × 4
##   Category          `# Crates` `# Unique Errors` Total        
##   &lt;chr&gt;             &lt;chr&gt;      &lt;chr&gt;             &lt;chr&gt;        
## 1 Foreign Functions 145 / 92   14 / 13           15756 / 14106
## 2 Rust Functions    79 / 19    12 / 7            467 / 242    
## 3 Static Items      11 / 5     7 / 3             184 / 169    
## 4 All               227 / 109  33 / 23           16407 / 14517</code></pre>
<p>The following table displays hidden error counts by error type and data type.</p>
<pre><code>## # A tibble: 14 × 6
##    Type    Error      `Foreign Functions` `Foreign Items` `Rust Functions` Total
##    &lt;chr&gt;   &lt;chr&gt;                    &lt;dbl&gt;           &lt;dbl&gt;            &lt;dbl&gt; &lt;dbl&gt;
##  1 Adt     EnumNoRep…                  27               7               23    57
##  2 Adt     StructFie…                8001             161                7  8169
##  3 Adt     StructNon…                   2               0                0     2
##  4 Adt     UnionLayo…                1196               0               55  1251
##  5 Adt     OnlyPhant…                   1               0                0     1
##  6 Array   --                           5               0                0     5
##  7 Char    --                           2               0                0     2
##  8 Dynamic Dyn                          3               0               10    13
##  9 FnPtr   --                         286               1                0   287
## 10 Int     Num128Bit                    1               0               66    67
## 11 Slice   --                           1               0                0     1
## 12 Tuple   --                           7               0               23    30
## 13 Uint    Num128Bit                 4574               0               58  4632
## 14 All     All                      14106             169              242 14517</code></pre>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sampling-for-qualitative-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/02-quantitative.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

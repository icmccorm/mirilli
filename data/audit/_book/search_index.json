[["introduction.html", "Audit 1 Introduction", " Audit Ian McCormack 2023-01-13 1 Introduction "],["abi-distribution.html", "2 ABI Distribution", " 2 ABI Distribution The maximum number of ABIs defined in a single file. by_count &lt;- late_abis %&gt;% group_by(crate_name) %&gt;% summarize(n=n()) print(max(by_count$n)) ## [1] 4 The number of ABI occurrences in files. "],["improper-type-errors.html", "3 Improper Type Errors", " 3 Improper Type Errors We observed 1.6761^{4} type errors in foreign bindings. There were 478 unique errors which occurred for 227 unique crates. There were 44 crates that disabled the improper_ctypes lint. There were 12 crates that disabled the improper_types_definitions lint. There were 10 crates that disabled both lints. When we include crates that have lints disabled per-item, we have 95 crates that disabled improper_ctypes lint, we have 21 crates that disabled the improper_types_definitions lint, and 10 crates that disabled both lints. ## # A tibble: 4 × 7 ## Category `# Crates` `# Unique Errors` Total Mean St.Dev Max ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 Foreign Functions 142 / 91 525 / 435 16130 / 144… 113.… 476.7… 5375… ## 2 Rust Functions 78 / 15 149 / 32 437 / 195 5.6 … 15.8 … 136 … ## 3 Static Items 15 / 6 40 / 31 194 / 171 12.9… 25.3 … 99 /… ## 4 All 227 / 105 714 / 498 16761 / 147… 73.8… 386.8… 5474… ## [1] 14793 ## # A tibble: 16 × 7 ## Type Error Unique `Foreign Funct…` `Foreign Items` `Rust Functions` Total ## &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Adt EnumN… 2 4 0 0 4 ## 2 Adt EnumN… 51 29 7 21 57 ## 3 Adt Struc… 354 8286 161 7 8454 ## 4 Adt Struc… 1 2 0 0 2 ## 5 Adt Union… 102 908 2 10 920 ## 6 Adt OnlyP… 1 1 0 0 1 ## 7 Array -- 42 21 0 0 21 ## 8 Char -- 7 19 0 0 19 ## 9 Dynamic -- 32 3 0 4 7 ## 10 FnPtr -- 13 295 1 0 296 ## 11 Int 128Bit 2 1 0 66 67 ## 12 Slice -- 30 1 0 1 2 ## 13 Str -- 8 0 0 4 4 ## 14 Tuple -- 15 7 0 24 31 ## 15 Uint 128Bit 54 4850 0 58 4908 ## 16 All -- 714 14427 171 195 14793 # large &lt;- function(x){ # paste0(&#39;\\textbf{&#39;, x, &#39;}&#39;) # } # addtorow &lt;- list() # addtorow$pos &lt;- list(0, 0) # addtorow$command &lt;- c(&quot;&amp; &amp; &amp; \\\\multicolumn{4}{c}{\\\\# Occurrences} \\\\\\\\\\n&quot;, # &quot;Category &amp; \\\\# Crates &amp; \\\\# Unique &amp; Total &amp; Mean &amp; St.Dev. &amp; Max \\\\\\\\\\n&quot;) # xt_counts = xtable( # count_summary, # type = &quot;latex&quot;, # digits=c(0,0,0,0,0,1,1,0), # ) # align(xt_counts) &lt;- &quot;llcc|cccc&quot; # print(xt_counts, # include.rownames = FALSE, # add.to.row = addtorow, # file = &quot;../latex/err_counts.tex&quot;, # include.colnames = FALSE, # sanitize.colnames.function = large, # floating=FALSE, # latex.environments=NULL # ) # addtorow &lt;- list() # addtorow$pos &lt;- list(0, 0) # addtorow$command &lt;- c(&quot;&amp; &amp; &amp; \\\\multicolumn{4}{c}{\\\\# Hidden Occurrences} \\\\\\\\\\n&quot;, # &quot;Error Category &amp; Error &amp; \\\\# Unique &amp; Foreign Functions &amp; Foreign Items &amp; Rust Functions &amp; Total \\\\\\\\\\n&quot;) # xt_type_counts &lt;- xtable( # filtered, # type = &quot;latex&quot;, # digits=c(0,0,0,0,0,0,0,0), # floating=FALSE, # latex.environments=NULL # ) # align(xt_type_counts) &lt;- &quot;lllc|cccc&quot; # print(xt_type_counts, # include.rownames = FALSE, # add.to.row = addtorow, # file = &quot;../latex/err_type_counts.tex&quot;, # include.colnames = FALSE, # sanitize.colnames.function = large, # floating=FALSE, # latex.environments=NULL # ) "],["quantitative-results.html", "4 Quantitative Results 4.1 ABI Distribution", " 4 Quantitative Results We began with a snapshot of the crates.io database taken on 12/20/2022, which contained 99,785 crates. After filtering out crates without any valid published versions, 96,049 crates remained. We ran our linting tool on this population. Prior to linting, we found that the latest version of 58 crates contained an empty archive when downloaded from crates.io. For crates with non-empty archives, 85,652 passed the early linting stage, while 10,397 failed it. Of those that passed the early linting stage, 83,491 passed the late linting stage, while 2,161 failed it. We use the subset of crates that passed both linting stages as the basis for our study, which comprises 84% of all crates in the database. Though 2,884 crates that passed the late linting stage failed to compile, we still include these in our sample to avoid excluding crates that have valid Rust code but are missing dependencies that cargo cannot provide. 4.1 ABI Distribution Both the early and late lints recorded the number of occurrences of each ABI for the rust functions, foreign functions, and static items declared in each crate. There were 4,151 crates that only appeared in results from the early lint. However, there were 3,434 crates that had one or more foreign ABIs that were only detected in the early lint. "],["references.html", "References", " References "]]
